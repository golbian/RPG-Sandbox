!function(y){var e={init:function(i){var n=y.extend({},y.fn.cypivot.defaults,i),e=this;n.resizable&&y(window).resize(function(){n.resizableWidth&&Q(e),n.resizableHeight&&F(e)});var l=this.each(function(){var i=y(this);if(i.data("cypivot",{target:i,options:n}),n.localStoragePrefix&&n.storeDimConfig){var e=localStorage.getItem(n.localStoragePrefix+"horizontalDims"),l=localStorage.getItem(n.localStoragePrefix+"verticalDims"),s=localStorage.getItem(n.localStoragePrefix+"filterDims");e&&f(n.dimensions,e)&&f(n.dimensions,l)&&(n.horizontalDimensions=e.split(";")),l&&f(n.dimensions,e)&&f(n.dimensions,l)&&(n.verticalDimensions=l.split(";")),s&&f(n.dimensions,s)&&f(n.dimensions,s)&&(n.filterDimensions=s.split(";"))}var D,x,a="",t="";(n.configuration&&(a='<div class="'+n.div11Class+'">'+n.configLabel+"</div>",null===document.getElementById(n.pivotConfigDialogId)&&(t='<div id="'+n.pivotConfigDialogId+'" class="'+n.configDialogClass+'"></div>')),i.html('<table class="'+n.tableClass+'">  <tr class="'+n.topRowClass+'">    <td class="'+n.cell11Class+'">'+a+'    </td>    <td class="'+n.cell12Class+'">      <div class="'+n.div12Class+'">      </div>    </td>  </tr>  <tr class="'+n.bottomRowClass+'">    <td class="'+n.cell21Class+'">      <div class="'+n.div21Class+'">      </div>    </td>    <td class="'+n.cell22Class+'">      <div class="'+n.div22Class+'-super">      <div class="'+n.div22Class+'">        <table class="'+n.pivotDataTableClass+'">      </div>      </div>    </td>  </tr></table>'+t),i.find("."+n.div22Class).on("scroll",function(){r(i,n)}),i.find("."+n.cell22Class).resize(function(){r(i,n)}),n.configuration)&&(void 0===i.find("#"+n.pivotConfigDialogId).dialog("instance")&&(i.find("."+n.div11Class).on("click",function(){!function(i,e){if(e.configuration){var l=i.find("."+e.div11Class);if(l.toggleClass(e.configWindowActivatedClass),l.hasClass(e.configWindowActivatedClass))jQuery("#"+e.pivotConfigDialogId).dialog("open");else{var s=jQuery("#"+e.pivotConfigDialogId);s.dialog("close")}}}(i,n)}),function(o,r){for(var d=o.find("."+r.configDialogClass),i={},e='<li class="'+r.dimensionListTitleClass+'" vdims="true">'+r.verticalDimensionListTitle+"</li>",l=0;l<r.verticalDimensions.length;l++){var s=r.verticalDimensions[l];i[s]=!0;var a=r.dimensions[s];e=e+'<li dim="'+s+'">'+a.label+"</li>"}r.configuration&&r.configuration.verticalDimensions||(e="");for(var t='<li class="'+r.dimensionListTitleClass+'" hdims="true">'+r.horizontalDimensionListTitle+"</li>",l=0;l<r.horizontalDimensions.length;l++){var s=r.horizontalDimensions[l];i[s]=!0;var a=r.dimensions[s];t=t+'<li dim="'+s+'">'+a.label+"</li>"}if(!r.configuration||!r.configuration.horizontalDimensions)var t="";for(var n='<li class="'+r.dimensionListTitleClass+'" fdims="true">'+r.filterDimensionListTitle+"</li>",l=0;l<r.filterDimensions.length;l++){var s=r.filterDimensions[l];i[s]=!0;for(var a=r.dimensions[s],c=E(r,[],s,""),v="<ul>",m=0;m<c.length;m++){var f=c[m];v=v+"<li><input type='checkbox' value='"+f.id+"'/>"+f.label+"</li>"}v+="</ul>",n=n+'<li dim="'+s+'">'+a.label+v+"</li>"}r.configuration&&r.configuration.filterDimensions||(n="");var C="";for(var s in r.dimensions)if(1!=i[s]){var a=r.dimensions[s];C=C+'<li dim="'+s+'">'+a.label+"</li>"}d.append('<ul class="'+r.firstDimensionListClass+'" style="padding-bottom:0px; margin-bottom:0px;"><li class="'+r.dimensionListTitleClass+'">'+r.dimensionListTitle+'</li></ul><ul class="'+r.dimensionListClass+'" style="padding-top:0px; margin-top:0px;">'+C+t+e+n+"</ul>"),d.find("ul."+r.dimensionListClass).sortable({cancel:"."+r.dimensionListTitleClass,update:function(){var e=[],l=[],s=[],a=[];if(d.find("."+r.dimensionListClass+" li").each(function(){var i=jQuery(this).attr("dim");i&&(a[a.length]=i),"true"==jQuery(this).attr("vdims")&&(a=e),"true"==jQuery(this).attr("hdims")&&(a=l),"true"==jQuery(this).attr("fdims")&&(a=s)}),r.configuration&&1==r.configuration.verticalDimensions&&(r.verticalDimensions=e),r.configuration&&1==r.configuration.horizontalDimensions&&(r.horizontalDimensions=l),r.configuration&&1==r.configuration.filterDimensions&&(r.filterDimensions=s),r.localStoragePrefix&&r.storeDimConfig){var i=r.horizontalDimensions.join(";"),t=r.verticalDimensions.join(";"),n=r.filterDimensions.join(";");localStorage.setItem(r.localStoragePrefix+"horizontalDims",i),localStorage.setItem(r.localStoragePrefix+"verticalDims",t),localStorage.setItem(r.localStoragePrefix+"filterDims",n)}u(o,r)}})}(i,n),i.find("#"+n.pivotConfigDialogId).dialog({modal:!1,title:"Pivot Table Configuration",position:["right","50px"],autoOpen:!1,beforeClose:function(){i.find("."+n.div11Class).removeClass(n.configWindowActivatedClass)}})));r(i,n),o(i,[],[n.verticalDimensions[0],n.horizontalDimensions[0]],0,0,n),x=n,(D=i).on("click","."+x.div12Class+" ."+x.dimLabelClass,function(i){var l,e,s,a,t=D.find("."+x.div22Class+" ."+x.pivotDataTableClass),n=(new Date,y(this)),o=!1;if(n.hasClass(x.expandedDimLabelClass)){var r=L(n,x);if(0<r){var d=w(n,x),c=t[0],v=function(i,e,l){for(var s=0,a=i.rows[0],t=0;t<l;t++){cell=a.cells[e+t];var n=jQuery(cell).width();s+=n}return s}(c,d,r-1);!function(i,e,l,s){for(var a=0;a<i.rows.length;a++)for(var t=i.rows[a],n=0;n<l;n++)t.cells[e+n],t.deleteCell(e);s&&s()}(c,d,r-1,function(){n.parent().find("."+x.dimCellClass).remove(),n.width(v+"px");for(var i=-1,e=0;e<c.rows.length;e++){var l=c.rows[e];cell=l.cells[d],i<0&&(i=jQuery(cell).width())}n.removeClass(x.expandedDimLabelClass).addClass(x.collapsedDimLabelClass),n.parent().removeClass(x.expandedDimCellClass).addClass(x.collapsedDimCellClass),P(D,x),R(D,x)})}e=x.onCollapse}else if(n.hasClass(x.collapsedDimLabelClass)){var m=this.parentElement.pivotContext,f=w(n,x),C=n.parent(),u=function(i){N(C,x,x.verticalDimensions,null,i);var e=L(n,x);0<e&&(n.addClass(x.expandedDimLabelClass).removeClass(x.collapsedDimLabelClass),n.parent().addClass(x.expandedDimCellClass).removeClass(x.collapsedDimCellClass),0<e&&j(t[0],x,f,e-1,i),o=!0),R(D,x),l=x.onExpand},h=z(m,x.verticalDimensions),p=I(D,x),g=(s=x,a=0,D.find("."+s.div12Class+" ."+s.dimCellClass).each(function(){a<this.pivotContext.length&&(a=this.pivotContext.length)}),a);m.length==g&&p.push(x.verticalDimensions[m.length]);var b=x.dataProvider(x,h,p,u);b&&u(b)}return o&&(P(D,x),x.resizable&&(x.resizableWidth&&Q(D),x.resizableHeight&&F(D)),e&&e(this),l&&l(this),R(D,x)),!1}),D.on("click","."+x.div21Class+" ."+x.dimLabelClass,function(i){var l,e;if(new Date,!i.isPropagationStopped()){var s,a,t=y(this),n=t.parent(),o=!1;if(t.hasClass(x.expandedDimLabelClass)){var r=T(t,x),d=g(t,x),c=$pivotDataTable[0];0<r&&(function(i,e,l){for(var s=0;s<l;s++)i.deleteRow(e)}(c,d+1,r),n.find("."+x.dimCellClass).remove(),t.removeClass(x.expandedDimLabelClass),t.addClass(x.collapsedDimLabelClass),n.removeClass(x.expandedDimCellClass),n.addClass(x.collapsedDimCellClass),o=!0),e=x.onCollapse}else if(t.hasClass(x.collapsedDimLabelClass)){var v=this.parentElement.pivotContext,m=g(t,x),f=function(i){N(n,x,x.horizontalDimensions,null,i),t.addClass(x.expandedDimLabelClass).removeClass(x.collapsedDimLabelClass),n.addClass(x.expandedDimCellClass).removeClass(x.collapsedDimCellClass);var e=T(t,x);0<e&&(S($pivotDataTable[0],x,m+1,e,i),o=!0),R(D,x),l=x.onExpand},C=z(v,x.horizontalDimensions),u=I(D,x),h=(s=x,a=0,D.find("."+s.div21Class+" ."+s.dimCellClass).each(function(){a<this.pivotContext.length&&(a=this.pivotContext.length)}),a);v.length==h&&u.push(x.horizontalDimensions[v.length]);var p=x.dataProvider(x,C,u,f);p&&f(p),l=x.onExpand}return o&&(x.resizable&&(x.resizableWidth&&Q(D),x.resizableHeight&&F(D)),P(D,x),e&&e(this),l&&l(this),R(D,x)),new Date,!1}})});return n.resizable&&(n.resizableWidth&&Q(e),n.resizableHeight&&F(e)),l},options:function(i,e){return y(this).data("cypivot").options},reload:function(o,r){return this.each(function(){var i=y(this),e=i.data("cypivot");if(o&&(e.options.data=o),r){for(var l=i.find("."+e.options.div22Class+" ."+e.options.pivotDataTableClass)[0],s=0;s<l.rows.length;s++)for(var a=l.rows[s],t=0;t<a.cells.length;t++){var n=a.cells[t];m(n.colContext,r.colContext)&&m(n.rowContext,r.rowContext)&&(n.isCalculated=!1)}P(i,e.options)}else P(i,e.options,!0)})},reconfig:function(i){var e=y.extend({},y.fn.cypivot.defaults,i);u(y(this),e)}};function o(s,i,a,e,l,t){var n=function(i){var e=t.verticalDimensions[0],l=E(i,a,e,"");console.log("curData",i),console.log("values",l),$pivotDataTable=s.find("."+t.div22Class+" ."+t.pivotDataTableClass);l=N(s.find("."+t.div21Class),t,t.horizontalDimensions,[],i);S($pivotDataTable[0],t,0,l.length),l=N(s.find("."+t.div12Class),t,t.verticalDimensions,[],i),j($pivotDataTable[0],t,0,l.length,i),R(s,t)},o=t.dataProvider(t,i,a,n);o&&n(o)}function w(i,e){var l;l=i.hasClass(e.levelClassPrefix+"0")?i.parent():i.parents("."+e.levelClassPrefix+"0").parent();var s=0,a=!1;return l.find("."+e.dimLabelClass).each(function(){if(!a){if(this==i[0])return!(a=!0);0==y(this).parent().children("."+e.dimCellClass).size()&&s++}}),s}function g(i,e){var l;l=i.hasClass(e.levelClassPrefix+"0")?i.parent():i.parents("."+e.levelClassPrefix+"0").parent();var s=0,a=!1;return l.find("."+e.dimLabelClass).each(function(){if(!a){if(this==i[0])return!(a=!0);y(this);s++}}),s}function b(i,e){var l=[];return i.find("."+e.div21Class+" ."+e.dimCellClass).each(function(){l[l.length]=this.pivotContext}),l}function D(i,e){var l=[];return i.find("."+e.div12Class+" ."+e.dimCellClass).not("."+e.expandedDimCellClass).each(function(){l[l.length]=this.pivotContext}),l}function L(i,e){var l=i.parent(),s=0;i[0];return l.find("."+e.dimLabelClass).each(function(){0==y(this).parent().children("."+e.dimCellClass).size()&&s++}),s}function T(i,e){var l=i.parent(),s=i[0];return l.find("."+e.dimLabelClass).not(s).size()}function u(i,e){i.find("."+e.div21Class).html(""),i.find("."+e.div12Class).html(""),i.find("."+e.div22Class).html('<table class="'+e.pivotDataTableClass+'">'),o(i,[],[e.verticalDimensions[0],e.horizontalDimensions[0]],0,0,e)}function z(i,e){for(var l={},s=0;s<i.length;s++)l[e[s]]=i[s];return l}function I(i,e){var l=[];return s(i,e,e.div21Class,e.horizontalDimensions,l),s(i,e,e.div12Class,e.verticalDimensions,l),l}function s(i,e,l,s,a){var t=0;i.find("."+l+" ."+e.dimCellClass).each(function(){t<this.pivotContext.length&&(t=this.pivotContext.length)});for(var n=0;n<t;n++)a.push(s[n])}function P(i,e,l){for(var s,a=b(i,e),t=D(i,e),n=i.find("."+e.div22Class+" ."+e.pivotDataTableClass)[0],o=0;o<n.rows.length;o++){var r=n.rows[o],d=a[o];s=null;for(var c=0;c<r.cells.length;c++){var v=t[c],m=r.cells[c];if(m.colContext=v,m.rowContext=d,1!=m.isCalculated||1==l){null==s&&(s=e.map(d,[],e.data));var f=e.map(d,v,s.default),C=e.reduce(f),u="";if(e.dataCellRenderer)u=e.dataCellRenderer(C,v,d,e);else if(0<y("#cellTemplate").size()){var h=y("#cellTemplate").html();u=_.template(h,{items:C,rowContext:d,colContext:v,options:e})}jQuery(m).html('<div class="'+e.divDataCellClass+'">'+u+"</div>"),m.isCalculated=!0}}}}function j(i,e,l,s,a){for(var t=y(i),n=b(t.parents(".cypivot"),e),o=D(t.parents(".cypivot"),e),r=0;r<i.rows.length;r++)for(var d=i.rows[r],c=n[r],v=0;v<s;v++){var m=o[l+v],f=d.insertCell(l+v);f.className=e.dataCellClass;var C=document.createElement("div");f.appendChild(C),C.className=e.divDataCellClass;var u=e.map(c,m,a),h=e.reduce(u),p="";e.dataCellRenderer&&(p=e.dataCellRenderer(h,m,c,e)),y(C).html(p)}}function S(i,e,l,s,a){for(var t=y(i),n=b(t.parents(".cypivot"),e),o=D(t.parents(".cypivot"),e),r=0<i.rows.length?i.rows[0]:null,d=0;d<s;d++){var c=i.insertRow(l+d),v=n[l+d],m=[];if(r)for(var f=0;f<r.cells.length;f++){var C=o[f],u=e.map(v,C,a),h=e.reduce(u),p="";e.dataCellRenderer&&(p=e.dataCellRenderer(h,C,v,e)),m.push('<td class="'+e.dataCellClass+'"><div class="'+e.divDataCellClass+'">'+p+"</div></td>")}jQuery(c).html(m.join(""))}}function R(i,e){var l,r,d,c,s,a,t,n;1==e.syncDimensionCellSizes&&(a=e,(t=(s=i).find("."+a.div22Class+" ."+a.pivotDataTableClass)[0]).rows[0],n=0,s.find("."+a.div21Class+" ."+a.dimLabelClass).each(function(){var i=t.rows[n],e=jQuery(i),l=jQuery(this),s=e.outerHeight()+"px";l.css({height:s}),n++}),r=e,d=(l=i).find("."+r.div22Class+" ."+r.pivotDataTableClass)[0].rows[0],c=0,d&&l.find("."+r.dimLabelClass).each(function(){var i=jQuery(this);if(i.hasClass(r.expandedDimLabelClass))i.parent().css({width:"auto"});else{var e=d.cells[c],l=jQuery(e);i.css("width","auto");var s=l.outerWidth()+"px";if(c<d.cells.length-1){var a=d.cells[c+1],t=jQuery(a),n=l.position(),o=t.position();s=o.left-n.left}i.parent().css({width:s}),c++}}))}function E(i,e,l,s){for(var a=[],t=0;t<i.length;t++){v(r=i[t],e)&&a.push(r)}var n=[],o={};for(t=0;t<a.length;t++){v(r=a[t],e);var r,d=r[l],c="object"==typeof d?d.id:d;d&&d!=Number.POSITIVE_INFINITY&&1!=o[c]&&(o[c]=!0,n.push(d))}return null!=s&&(n=n.sort(function(i,e){return i[s]<e[s]?-1:i[s]>e[s]?1:0})),n}function v(i,e){for(var l in e){var s,a=e[l],t=a.dimName,n=a.id,o=i[t];if(null!=o)if(null!=(s="number"==typeof o?o:"string"==typeof o?o:o.id)&&null!=s&&n!=s&&s!=Number.POSITIVE_INFINITY)return!1}return!0}function N(i,e,l,s,a){var t;s?i[0].pivotContext=x(s):s=i[0].pivotContext;var n=l[s.length],o=x(s),r=e.dimensions[n],d=i.find("."+e.dimTotalCellClass);if(r){var c=r.values?r.values(s):E(a,s,n,r.sortFieldName);0<(t=c).length&&i.children("."+e.dimLabelClass).css({width:""});for(var v=0;v<c.length;v++){var m=c[v],f="object"==typeof m?m.id:m,C="object"==typeof m?m.label:m;(m="object"==typeof m?m:{id:m,label:m}).dimName=n,o[s.length]=m;var u=document.createElement("div");u=0<d.size()?i[0].insertBefore(u,d[0]):i[0].appendChild(u),(g=jQuery(u)).addClass(e.dimCellClass+" "+e.dimCellClass+"-"+n+" "+e.levelClassPrefix+s.length+" "+e.pivotIdClassPrefix+f),g.attr({pivotId:f,dimName:n,title:r.label+" : "+unescape(C)});var h=e.dimensionCellRenderer?e.dimensionCellRenderer(e,o,!1):"<span title='"+r.label+": "+C+"'><i class='"+e.dimCellIconClass+"'></i>"+C+"</span>";g.append('<div class="'+e.dimLabelClass+" "+e.dimLabelClass+"-"+n+" "+(r.className?r.className+" ":"")+(o.length<l.length?e.expandableDimLabelClass:"")+'">'+h+"</div>");var p=g.children("."+e.dimLabelClass);if(u.pivotContext=x(o),e.isExpanded(o)&&o.length<l.length)p.addClass(e.expandedDimLabelClass),p.parent().addClass(e.expandedDimCellClass),N(i.children("."+e.pivotIdClassPrefix+f),e,l,o,a);else o.length<l.length&&(p.addClass(e.collapsedDimLabelClass),p.parent().addClass(e.collapsedDimCellClass))}if(0==d.size()&&0<s.length&&l==e.verticalDimensions){var g;u=document.createElement("div");u=i[0].appendChild(u),(g=jQuery(u)).addClass(e.dimCellClass),g.addClass(e.dimTotalCellClass),g.addClass(e.levelClassPrefix+s.length),g.attr("dimName",n),u.pivotContext=x(s);h=e.dimensionCellRenderer?e.dimensionCellRenderer(e,o,!0):"";g.append('<div class="'+e.dimLabelClass+'">Total</div>')}}return t}function r(i,e){var l=function(){var i=document.createElement("p");i.style.width="100%",i.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(i),document.body.appendChild(e);var l=i.offsetWidth;e.style.overflow="scroll";var s=i.offsetWidth;l==s&&(s=e.clientWidth);return document.body.removeChild(e),l-s}(),s=i.find("."+e.div22Class);e.autoSize||i.find("."+e.div12Class).css({});s.height();e.autoSize||i.find("."+e.div21Class).css({"margin-bottom":l+"px"}),i.find("."+e.div12Class).scrollLeft(s.scrollLeft()),i.find("."+e.div21Class).scrollTop(s.scrollTop())}function x(i){if(!i||"object"!=typeof i)return i;var e,l,s="function"==typeof i.pop?[]:{};for(e in i)i.hasOwnProperty(e)&&(l=i[e],s[e]=l&&"object"==typeof l?x(l):l);return s}function d(i,e){for(var l=0;l<e.length;l++){var s=e[l],a=i[s.dimName];if("object"==typeof a&&null!=a&&(a=a.id),s.id!=a)return!1}return!0}function c(i,e,l){var s={};for(var a in l){var t=l[a],n=t.dimName,o=t.id;if(o!=e[n])return!1;s[n]=o}for(var a in i.dimensions)if(null==s[a]&&null!=e[a])return!1;return!0}function Q(i){var e=i.find(".div22").offset().left;i.find(".div22").css({width:window.innerWidth-e+"px"}),i.find(".div12").css({})}function F(i){var e=i.find(".div22").offset().top;i.find(".div22").css({height:window.innerHeight-e+"px"}),i.find(".div21").css({height:window.innerHeight-e+"px"})}function m(i,e){if(e.length<i.length)return!1;for(var l=0;l<i.length;l++)if(i[l].id!=e[l].id)return!1;return!0}function f(i,e){e=e.split(";");for(var l=0;l<e.length;l++){if(null==i[e[l]])return!1}return!0}y.fn.cypivot=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void y.error("Method "+i+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)},y.fn.cypivot.defaults={syncDimensionCellSizes:!0,resizable:!0,resizableWidth:!0,resizableHeight:!0,autoSize:!1,tableClass:"cypivot",topRowClass:"top-row",bottomRowClass:"bottom-row",cell11Class:"cell11",cell12Class:"cell12",cell21Class:"cell21",cell22Class:"cell22",div11Class:"div11",div12Class:"div12",div21Class:"div21",div22Class:"div22",pivotDataTableClass:"pivot-data-table",dimLabelClass:"dim-label",dimCellIconClass:"dim-cell-icon",dimCellClass:"dim-cell",expandableDimLabelClass:"expandable-dim-label",expandedDimLabelClass:"expanded-dim-label",collapsedDimLabelClass:"collapsed-dim-label",expandedDimCellClass:"expanded-dim-cell",collapsedDimCellClass:"collapsed-dim-cell",dimTotalCellClass:"dim-total-cell",dataTotalCellClass:"data-total-cell",levelClassPrefix:"level-",dataRowClass:"data-row",dataCellClass:"data-cell",divDataCellClass:"div-data-cell",configDialogClass:"config-dialog",dimensionListTitle:"Dimensions",horizontalDimensionListTitle:"Rows",verticalDimensionListTitle:"Columns",filterDimensionListTitle:"Filters",configWindowActivatedClass:"config-window-activated",dimensionListClass:"dimension-list",firstDimensionListClass:"first-dimension-list",dimensionListTitleClass:"dimension-list-title",verticalDimensionListClass:"vertical-dimension-list",horizontalDimensionListClass:"horizontal-dimension-list",filterDimensionListClass:"filter-dimension-list",pivotIdClassPrefix:"pivot-id-",pivotConfigDialogId:"pivot-config-dialog",isExpanded:function(i){return 0==i.length},configuration:{horizontalDimensions:!0,verticalDimensions:!0,filterDimensions:!1},configLabel:"Config",localStoragePrefix:"cy-pivot-",storeDimConfig:!0,dataCellRenderer:function(i,e,l,s){for(var a="",t=0;t<s.valueDataFields.length;t++){var n=s.valueDataFields[t];a=a+"<span class='value-"+n+"'>"+i.default.sum[n]+"</span> "}return a},dataProvider:function(i,e,l){return i.data},dimensionCellRenderer:null,dimensions:{dim1:{label:"Colors",values:function(i){return[{id:1,label:"Red"},{id:2,label:"Blue"},{id:3,label:"Green"}]},showTotal:!0},dim2:{label:"Cities",values:function(i){return[{id:1,label:"Saint-Petersburg"},{id:2,label:"Moscow"},{id:3,label:"London"},{id:4,label:"Paris"}]},showTotal:!0},dim3:{label:"Shapes",values:function(i){return[{id:1,label:"Round"},{id:2,label:"Square"},{id:3,label:"Star"},{id:4,label:"Ellipse"}]},showTotal:!0},dim4:{label:"Planets",values:function(i){return[{id:1,label:"Earth"},{id:2,label:"Moon"},{id:3,label:"Mars"},{id:4,label:"Neptune"}]},showTotal:!0},dim5:{label:"Geo",values:function(i){return[{id:1,label:"Asia"},{id:2,label:"Africa"},{id:3,label:"Europe"},{id:4,label:"America"}]},showTotal:!0},dim6:{label:"Lessons",values:function(i){return[{id:1,label:"Phisics"},{id:2,label:"Chemistry"},{id:3,label:"Math"},{id:4,label:"Geography"}]},showTotal:!0}},horizontalDimensions:["dim1","dim3","dim5"],verticalDimensions:["dim2"],filterDimensions:[],data:[{dim1:"Red",dim2:"Saint-Petersburg",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Phisics",value:1},{dim1:"Red",dim2:"Saint-Petersburg",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Chemistry",value:1},{dim1:"Blue",dim2:"Saint-Petersburg",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Chemistry",value:1},{dim1:"Green",dim2:"Moscow",dim3:"Round",dim4:"Earth",dim5:"Asia",dim6:"Chemistry",value:1}],map:function(i,e,l){for(var s=[],a=[],t=[],n=0;n<i.length;n++){var o=i[n];t.push(o)}for(n=0;n<e.length;n++){o=e[n];t.push(o)}for(n=0;n<l.length;n++){var r=l[n];d(r,t)&&s.push(r),c(this,r,t)&&(a[a.length]=r)}return{default:s,stricted:a}},valueDataFields:["value"],reduce:function(i){var e={};for(itemsKey in i){for(var l=i[itemsKey],s={},a={},t={},n=0;n<this.valueDataFields.length;n++){for(var o=this.valueDataFields[n],r=0,d=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,v=0;v<l.length;v++){var m=l[v][o];r+=m,m<c&&(c=m),d<m&&(d=m)}s[o]=r,a[o]=d,t[o]=c}e[itemsKey]={},e[itemsKey].sum=s,e[itemsKey].count=l.length,e[itemsKey].avg=s/l.length,e[itemsKey].max=a,e[itemsKey].min=t}return e},reduces:[{valueDataFields:["value"],map:"default",reduce:function(i,e){for(var l={},s={},a=0;a<this.valueDataFields.length;a++){l[d=this.valueDataFields[a]]=0,s[d]=i.length}var t={},n={};for(a=0;a<i.length;a++)for(var o=i[a],r=0;r<this.valueDataFields.length;r++){var d;l[d=this.valueDataFields[r]]+=o[d],n[d]?n[d]>o[d]&&(n[d]=o[d]):n[d]=o[d],t[d]?t[d]>o[d]&&(t[d]=o[d]):t[d]=o[d]}return e&&(e.sum=l,e.count=i.length,e.avg=l/i.length,e.max=t,e.min=n),l}}]}}(jQuery);
//# sourceMappingURL=jquery.cy-pivot.min.js.map