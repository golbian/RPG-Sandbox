<div class="container-fluid root-container">
    <div class="row">
        <div class="col-md-3">
            <app-sidebar></app-sidebar>
        </div>

        <div class="col-md-9">
            <div class="page-header">
                <span class="h3" translate>User <small>User profile and permissions</small></span>
                <div class="pull-right">
                    <button ng-click="vm.editUser()" ng-if="vm.isWSTADMIN" class="btn btn-success" translate>Edit</button>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-3">
                    <h4 class="text-center">
                        {{ vm.user.userName }}

                        <a class="badge" ng-class="{'badge-success': vm.user.status == 'active', 'badge-danger': vm.user.status == 'Not active'}" ng-click="vm.changeUserStatus(vm.user)">
                            <span translate ng-if="vm.user.status == 'active'">active</span>
                            <span translate ng-if="vm.user.status == 'Not active'">not active</span>
                        </a>
                    </h4>

                    <div class="text-center">
                        {{ vm.user.title }}
                    </div>
                    <div class="text-center">
                        {{ vm.user.department }}
                    </div>
                    <div class="text-center">
                        {{ vm.user.businessUnit }}
                    </div>
                    <div class="text-center">
                        {{ vm.user.unit }}
                    </div>
                    <div class="text-center">
                        {{ vm.user.brand }}
                    </div>

                    <hr>

                    <ul class="list-unstyled user-info-list">
                        <li ng-repeat="role in vm.user.roles" style="color: #000;">
                            <i ng-if="vm.isWSTADMIN" class="fa fa-trash-o" style="color: #f00;" ng-click="vm.deleteRole(role)"></i> {{ vm.getRoleName(role) }}
                        </li>
                    </ul>
                    <form ng-if="vm.isWSTADMIN" class="form-inline">
                        <div class="form-group">
                            <label for="roleSelect" translate>Add role</label>
                            <select ng-model="vm.selectedRole" placeholder="{{ 'Add a new role...' | translate }}" ng-class="vm.selectedRole" id="roleSelect" class="form-control" ng-change="vm.selectedRoleChanged = true" ng-options="role._id as role.name for role in vm.getRolesNotInUser()"></select>
                        </div>
                        <button type="button" class="btn btn-link" ng-show="vm.selectedRoleChanged == true && vm.selectedRole != ''" ng-click="vm.user.roles.push(vm.selectedRole); vm.save(); vm.selectedRole = ''; vm.selectedRoleChanged = false;">
                            <i class="fa fa-plus" style="color: #00a000;"></i>
                        </button>
                    </form>

                    <hr>

                    <div class="row" style="font-size: 14px;">
                        <div class="col-sm-6">
                            <span>{{ vm.userCounts.sharedMaps }}</span>
                            <span translate>shared maps</span>
                        </div>
                        <div class="col-sm-6">
                            <span>{{ vm.userCounts.sharedDashBoards }}</span>
                            <span translate>shared games</span>
                        </div>
                        <div class="col-sm-6">
                            <span>{{ vm.userCounts.privateMaps }}</span>
                            <span translate>private maps</span>
                        </div>
                        <div class="col-sm-6">
                            <span>{{ vm.userCounts.privateDashBoards }}</span>
                            <span translate>private games</span>
                        </div>
                    </div>
                </div>

                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="panel ng-scope">
                                <div class="panel-heading hidden-print">
                                    <div class="panel-title" translate>Maps</div>
                                </div>
                                <div class="panel-body">
                                    <div class="list-group">
                                        <a ng-href="/#/maps/view/{{map._id}}" class="list-group-item" ng-repeat="map in vm.userMaps">
                                            {{ map.mapName }}
                                            <span ng-if="map.isShared" class="badge badge-success pull-right" translate>shared</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="panel">
                                <div class="panel-heading hidden-print">
                                    <div class="panel-title" translate>Games</div>
                                </div>

                                <div class="panel-body">
                                    <div class="list-group">
                                        <a ng-href="/#/games/view/{{ game._id }}" class="list-group-item" ng-repeat="dsh in vm.userGames">
                                            {{ game.gameName }}
                                            <span ng-if="game.isShared" class="badge badge-success pull-right" translate>shared</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
